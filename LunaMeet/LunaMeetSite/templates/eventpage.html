<!DOCTYPE html>
{% load static %}
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>{{ event.name }}</title>
    <link rel="stylesheet" href="{% static 'css/eventpage.css' %}">
    <link rel="stylesheet" href="{% static 'css/popup.css' %}">

    <title>Sign-up Page</title>
    <link rel="stylesheet" href='{% static "css/eventpage.css" %}' />
    <script src="{% static 'js/theme.js' %}" defer></script>
    <style>
body {

background-color: white;
            
            transition: background-color 0.3s ease, color 0.3s ease;
        }

        body.dark-theme {
          background-color: black;
        }

      .theme-toggle {
          position: relative;
          width: 60px;
          height: 60px;
          border: none;
          cursor: pointer;
          outline: none;
          background: none;
      }

      .theme-toggle img {
          width: 100%;
          height: 100%;
          object-fit: contain;
          transition: transform 0.5s ease;
      }

      .theme-toggle img.active {
          transform: rotate(360deg);
      }
  </style>

</head>
<body>
  <div class="theme-switcher">
    <button id="theme-toggle" class="theme-toggle">
        <img id="theme-icon"  alt="Theme Icon" style="width: 24px; height: 24px;">
    </button>
</div>

<div class="event-page-day">
  <!-- Заголовок события -->
  <div class="frame-2">
    <div class="name">{{ event.name }}</div>
  </div>

  <!-- Контент события -->
  <div class="content">
    <div class="image">
      <!-- Отображение картинок события -->
      {% if event.photos.all %}
        {% for photo in event.photos.all %}
          <img src="{{ photo.photo.url }}" alt="Event Photo" class="event-photo" />
        {% endfor %}
      {% else %}
        <p>No event photos available.</p>
      {% endif %}
    </div>

    <div class="owners">
      <p>Organizers:</p>
      {% for organizer in event.organizers_id.all %}
        <p>{{ organizer.username }}</p>
      {% empty %}
        <p>No organizers assigned.</p>
      {% endfor %}

<div class="event-page-day" id="block">
    <div class="frame-2">
      <div class="name text">Name</div>
    </div>
    <div class="content">
      <div class="image"></div>
      <div class="owners"></div>
    </div>
    <div class="reg">
      <div class="category text">Category:</div>
      <div class="dd-mm-yyyy-dd-mm-yyyy text">dd.mm.yyyy - dd.mm.yyyy</div>
      <div class="list">
        <select class="select"><option value="Не был(а)">Не был(а)</option><option value="Был(а)">Был(а)</option><option value="Планирую">Планирую</option></select>
        <!-- <img class="chevron-down" src="chevron-down0.svg" /> -->
      </div>
      <div class="button">
        <div class="div2 text">Зарегестрироваться</div>
      </div>
    </div>
    <div class="info">
      <div class="row">
        <div class="desc">
          <div class="head">
            <div class="description text">Description</div>
          </div>
          <div class="content2">
            <div class="div3 text">
              Задача организации, в особенности же реализация намеченных плановых
              заданий играет важную роль в формировании направлений прогрессивного
              развития. Задача организации, в особенности же постоянное
              информационно-пропагандистское обеспечение нашей деятельности
              позволяет оценить значение соответствующий условий активизации.
              Товарищи! рамки и место обучения кадров требуют
            </div>
          </div>
        </div>
        <div class="plan">
          <div class="head">
            <div class="plan2 text">Plan</div>
          </div>
          <div class="content3">
            <div class="event">
              <div class="date">
                <div class="dd-mm-yyyy text">dd.mm.yyyy</div>
              </div>
              <div class="text">
                <div class="start text">Start</div>
              </div>
            </div>
            <div class="event">
              <div class="date">
                <div class="dd-mm-yyyy text">dd.mm.yyyy</div>
              </div>
              <div class="text">
                <div class="event2 text">Event</div>
              </div>
            </div>
            <div class="event">
              <div class="date">
                <div class="dd-mm-yyyy text">dd.mm.yyyy</div>
              </div>
              <div class="text">
                <div class="event2 text">Event</div>
              </div>
            </div>
            <div class="event">
              <div class="date">
                <div class="dd-mm-yyyy text">dd.mm.yyyy</div>
              </div>
              <div class="text">
                <div class="event2 text">Event</div>
              </div>
            </div>
            <div class="event">
              <div class="date">
                <div class="dd-mm-yyyy text">dd.mm.yyyy</div>
              </div>
              <div class="text">
                <div class="end text">End</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="comments">
      <div class="head2">
        <div class="comments2 text">Comments</div>
      </div>
      <div class="comment-input">
        <input type="text" placeholder="Введите комментарий..." />
        <button>Добавить</button>
      </div>      
      
      <div class="content4">
        <div class="comment">
          <div class="user">
            <div class="icon"></div>
            <div class="user2 text">user</div>
          </div>
          <div class="text2">
            <div class="div4 text">
              Есть над чем задуматься: стремящиеся вытеснить традиционное
              производство, нанотехнологии неоднозначны и будут своевременно
              верифицированы. Также как постоянное информационно-пропагандистское
              обеспечение нашей деятельности говорит о возможностях новых
              предложений.
            </div>
          </div>
        </div>
        <div class="comment">
          <div class="user">
            <div class="icon"></div>
            <div class="user2 text">user</div>
          </div>
          <div class="text2">
            <div class="div4 text">
              Есть над чем задуматься: стремящиеся вытеснить традиционное
              производство, нанотехнологии неоднозначны и будут своевременно
              верифицированы. Также как постоянное информационно-пропагандистское
              обеспечение нашей деятельности говорит о возможностях новых
              предложений.
            </div>
          </div>
        </div>
      </div>

    </div>
  </div>

  <!-- Регистрация и категория события -->
  <div class="reg">
    <div class="reg-block">
      <div class="category">Category: {{ event.category.name }}</div>
    </div>
    <div class="reg-block">
      <div class="place">Place: {{ event.place }}</div>
    </div>
    <div class="reg-block">
      <form id="form_select">
        {% csrf_token %}
        <div class="list">
            <select class="select" id="select" >
              <option value="Не был(а)">Не был(а)</option>
              <option value="Был(а)">Был(а)</option>
              <option value="Планирую">Планирую</option>
            </select>
        </div>
      </form>
      <div class="button">Зарегистрироваться</div>
    </div>
  </div>

  <!-- Описание события -->
  <div class="info">
    <div class="desc">
      <div class="description">Description</div>
      <div class="div3">{{ event.description }}</div>
    </div>

    <!-- План мероприятия -->
    <div class="plan">
      <div class="plan2">Plan</div>
      {% if event.time_codes.all %}
        <div class="event">
          <div>Event Plan:</div>
          <ul>
            {% for timecod in event.time_codes.all %}
              <li>{{ timecod.time|date:"d.m.Y H:i" }} - {{ timecod.name }}</li>
            {% endfor %}
          </ul>
        </div>
      {% else %}
        <p>No event plan available.</p>
      {% endif %}
    </div>
  </div>

  <!-- Комментарии -->
  <div class="comments">
    <div class="comments2">Comments</div>
    <form action="" method="post" id="form">
        {% csrf_token %}
        <div class="comment-input">
            <input type="text" placeholder="Введите комментарий..." id="commentInput" name="comment"/>
            <button class="comment-btn" id="comment-btn" type="submit">Добавить</button>
        </div>
    </form>

    <!-- Отображение комментариев пользователей -->
    {% for comment in event.comments_set.all %}
      <div class="comment">
        <div class="user">
          <div class="user2">{{ comment.user.username }}</div>
        </div>
        <div class="div4">
          {{ comment.text }}
        </div>
      </div>
    {% empty %}
      <p>Нет комментариев.</p>
    {% endfor %}
  </div>
</div>
<script src="{% static 'js/eventpage.js' %}"></script>
</body>
</html>
