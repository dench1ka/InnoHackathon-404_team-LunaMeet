<!DOCTYPE html>
{% load static %}
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ event.name }}</title>
    <link rel="stylesheet" href="{% static 'css/eventpage.css' %}">
    <link rel="stylesheet" href="{% static 'css/popup.css' %}">
</head>
<body>
  <div class="theme-switcher">
    <button id="switch-theme-btn" class="round-button">
        <img id="theme-icon" src="{% static 'img/moon.png' %}" alt="Theme Icon" style="width: 24px; height: 24px;">
    </button>
</div>
<div class="event-page-day">
  <!-- Заголовок события -->
  <div class="frame-2">
    <div class="name">{{ event.name }}</div>
  </div>

  <!-- Контент события -->
  <div class="content">
    <div class="image">
      <!-- Отображение картинок события -->
      {% if event.photos.all %}
        {% for photo in event.photos.all %}
          <img src="{{ photo.photo.url }}" alt="Event Photo" class="event-photo" />
        {% endfor %}
      {% else %}
        <p>No event photos available.</p>
      {% endif %}
    </div>

    <div class="owners">
      <p>Organizers:</p>
      {% for organizer in event.organizers_id.all %}
        <p>{{ organizer.username }}</p>
      {% empty %}
        <p>No organizers assigned.</p>
      {% endfor %}
    </div>
  </div>

  <!-- Регистрация и категория события -->
  <div class="reg">
    <div class="reg-block">
      <div class="category">Category: {{ event.category.name }}</div>
    </div>
    <div class="reg-block">
      <div class="place">Place: {{ event.place }}</div>
    </div>
    <div class="reg-block">
      <form id="form_select">
        {% csrf_token %}
        <div class="list">
            <select class="select" id="select" >
              <option value="Не был(а)">Не был(а)</option>
              <option value="Был(а)">Был(а)</option>
              <option value="Планирую">Планирую</option>
            </select>
        </div>
      </form>
      <div class="button">Зарегистрироваться</div>
    </div>
  </div>

  <!-- Описание события -->
  <div class="info">
    <div class="desc">
      <div class="description">Description</div>
      <div class="div3">{{ event.description }}</div>
    </div>

    <!-- План мероприятия -->
    <div class="plan">
      <div class="plan2">Plan</div>
      {% if event.time_codes.all %}
        <div class="event">
          <div>Event Plan:</div>
          <ul>
            {% for timecod in event.time_codes.all %}
              <li>{{ timecod.time|date:"d.m.Y H:i" }} - {{ timecod.name }}</li>
            {% endfor %}
          </ul>
        </div>
      {% else %}
        <p>No event plan available.</p>
      {% endif %}
    </div>
  </div>

  <!-- Комментарии -->
  <div class="comments">
    <div class="comments2">Comments</div>
    <form action="" method="post" id="form">
        {% csrf_token %}
        <div class="comment-input">
            <input type="text" placeholder="Введите комментарий..." id="commentInput" name="comment"/>
            <button class="comment-btn" id="comment-btn" type="submit">Добавить</button>
        </div>
    </form>

    <!-- Отображение комментариев пользователей -->
    {% for comment in event.comments_set.all %}
      <div class="comment">
        <div class="user">
          <div class="user2">{{ comment.user.username }}</div>
        </div>
        <div class="div4">
          {{ comment.text }}
        </div>
      </div>
    {% empty %}
      <p>Нет комментариев.</p>
    {% endfor %}
  </div>
</div>
<script src="{% static 'js/eventpage.js' %}"></script>
</body>
</html>
